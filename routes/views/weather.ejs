<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- CSS only -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">

    <style>
        .logo {
            height: 32px;
            border-radius: 50%;
        }
    </style>

    <!-- font awesome  -->
    <script src="https://kit.fontawesome.com/2c582398a5.js" crossorigin="anonymous"></script>

    <!-- JavaScript Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
        crossorigin="anonymous"></script>

    <link rel="stylesheet" href="/stylesheets/index.css">
    <link rel="stylesheet" href="/stylesheets/weather.css">
</head>

<body>
    <!-- Navbar section  -->
    <%- include('_navbar') %>
    <center>
        <!-- <i class="fa-light fa-droplet-degree"></i> -->
        <form class="d-flex w90" method="post">
            <input class="form-control me-2" name="city" type="search" placeholder="Search" aria-label="Search">
            <button class="btn btn-success" type="submit">Search</button>
        </form>
    </center>

    <div class="container-fluid d-flex justify-content-center align-items-center mt-5">

    <% if(err === null) { %>
        <% if(cityName) { %>
        <div class="text-content">
            <center>
                <h1><%= cityName %></h1>
                <p><%= time %></p>
                <h5 data-weather><%= mainText %></h5>
                <h1><%= temp %>&deg;</h1>
                <table>
                    <tr>
                        <td><i class="fa-solid fa-droplet"></i> Humidity:</td>
                        <td><i class="fa-solid fa-wind"></i> Pressure:</td>
                    </tr>
                    <tr>
                        <td><%= humidity %></td>
                        <td><%= windSpeed %></td>
                    </tr>
                    <tr>
                        <td><i class="fa-solid fa-temperature-arrow-down"></i> Min</td>
                        <td><i class="fa-solid fa-temperature-arrow-up"></i> Max</td>
                    </tr>
                    <tr>
                        <td><%= minTemp %>&deg;</td>
                        <td><%= maxTemp %>&deg;</td>
                    </tr>
                </table>
            </center>
        </div>
        <% } %>
        <% } else { %>
            <h5 class="alert-danger p-3 text-center m-3"><%= err %></h5>
            <% } %>
    </div>
    <script src="/javascript/signout.js"></script>
    <script>
        let WeatherType = document.querySelector('[data-weather]').textContent;


            if (WeatherType == 'Clear') {
                document.querySelector(".text-content").background = "url('../images/clear.png')"
            } else if (WeatherType == 'Haze') {
                document.querySelector(".text-content").background = "url('https://metro.co.uk/wp-content/uploads/2018/06/gettyimages-915875914.jpg?quality=90&strip=all&zoom=1&resize=644%2C429')";
            } else if (WeatherType == 'Clouds') {
                document.querySelector(".text-content").background = "url('../images/cloudy.jpg')";
            } else if (WeatherType == 'Rain') {
                document.querySelector(".text-content").background = "url('../images/rainy.jpg')";
            } else if (WeatherType == 'Snow') {
                document.querySelector(".text-content").background = "url('../images/snow.jpg')";
            } else if (WeatherType == 'Sunny') {
                document.querySelector(".text-content").background = "url('../images/sunny.jpg')";
            } else if (WeatherType == 'Thunderstorm') {
                document.querySelector(".text-content").background = "url('../images/thunderstorm.jpg')";
            } else if (WeatherType == 'Windy') {
                document.querySelector(".text-content").background = "url('../images/windy.jpg')";
            } else if (WeatherType == 'Fog') {
                document.querySelector(".text-content").background = "url('../images/fogs.jpg')";
            } else if (WeatherType == 'Stormy') {
                document.querySelector(".text-content").background = "url('../images/stormy.jpg')";
            } else if (WeatherType == 'Tornadoes') {
                document.querySelector(".text-content").background = "url('../images/tornado.jpg')";
            } else if (WeatherType == 'Thundersnow') {
                document.querySelector(".text-content").background = "url('../images/thundersnow.jpg')";
            } else if (WeatherType == 'Smoke') {
                document.querySelector(".text-content").background = "url('../images/smoke.jpg')";
            }
            console.log(WeatherType);
    </script>
</body>

</html>